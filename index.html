<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>AniLabs</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{background:#0b0f1f;color:#fff;font-family:sans-serif;margin:0}
.msg{padding:10px;margin:6px;border-radius:12px;max-width:80%}
.user{background:#6ee7ff;color:#000;margin-left:auto}
.bot{background:#1a1f3c}
input{width:80%;padding:10px}
button{padding:10px}
</style>
</head>

<body>
<h2 id="name">Риас Гремори</h2>
<div id="chat"></div>

<input id="text" placeholder="Сообщение">
<button onclick="send()">➤</button>

<script>
const API = "https://shelba-hardenable-bell.ngrok-free.dev/chat";
let character = "Риас Гремори";

function add(text, cls){
  const d = document.createElement("div");
  d.className = "msg " + cls;
  d.innerText = text;
  chat.appendChild(d);
  d.scrollIntoView();
}

async function send(){
  const t = text.value.trim();
  if(!t) return;
  add(t,"user");
  text.value="";

  const r = await fetch(API,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ character, message:t })
  });
  const j = await r.json();
  add(j.reply,"bot");
}
</script>
</body>
</html>

